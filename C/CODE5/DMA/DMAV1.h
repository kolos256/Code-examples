#ifndef _DMAV1_H_
#define _DMAV1_H_

#include "CORE\CORE.h"
#ifdef USECONF
#include "CONF.h"
#endif//USECONF

#define DMAV1_CTEIF7 0x08000000
#define DMAV1_CHTIF7 0x04000000
#define DMAV1_CTCIF7 0x02000000
#define DMAV1_CGIF7 0x01000000
#define DMAV1_CTEIF6 0x00800000
#define DMAV1_CHTIF6 0x00400000
#define DMAV1_CTCIF6 0x00200000
#define DMAV1_CGIF6 0x00100000
#define DMAV1_CTEIF5 0x00080000
#define DMAV1_CHTIF5 0x00040000
#define DMAV1_CTCIF5 0x00020000
#define DMAV1_CGIF5 0x00010000
#define DMAV1_CTEIF4 0x00008000
#define DMAV1_CHTIF4 0x00004000
#define DMAV1_CTCIF4 0x00002000
#define DMAV1_CGIF4 0x00001000
#define DMAV1_CTEIF3 0x00000800
#define DMAV1_CHTIF3 0x00000400
#define DMAV1_CTCIF3 0x00000200
#define DMAV1_CGIF3 0x00000100
#define DMAV1_CTEIF2 0x00000080
#define DMAV1_CHTIF2 0x00000040
#define DMAV1_CTCIF2 0x00000020
#define DMAV1_CGIF2 0x00000010
#define DMAV1_CTEIF1 0x00000008
#define DMAV1_CHTIF1 0x00000004
#define DMAV1_CTCIF1 0x00000002
#define DMAV1_CGIF1 0x00000001

//Константы DMA1_CONFIG
#define DMAV1_M2M 0x000004000
//Приоритет канала DMA
#define DMAV1_PLOW 0x00000000
#define DMAV1_PMED 0x00001000
#define DMAV1_PHIGH 0x00002000
#define DMAV1_PVHI 0x00003000
//MSIZE
#define DMAV1_M8 0x00000000
#define DMAV1_M16 0x00000400
#define DMAV1_M32 0x00000800
//PSIZE
#define DMAV1_P8 0x00000000
#define DMAV1_P16 0x00000100
#define DMAV1_P32 0x00000200
#define DMAV1_MINC 0x00000080
#define DMAV1_PINC 0x00000040
#define DMAV1_CIRC 0x00000020
//DIR
#define DMAV1_RFP 0x00000000
#define DMAV1_RFM 0x00000010
#define DMAV1_TEIE 0x00000008
#define DMAV1_HTIE 0x00000004
#define DMAV1_TCIE 0x00000002

typedef struct
{
  union
  {
    volatile U32 VALUE;
    struct
    {
      volatile U32 GIF1:1,TCIF1:1,HTIF1:1,TEIF1:1,GIF2:1,TCIF2:1,HTIF2:1,TEIF2:1,GIF3:1,TCIF3:1,HTIF3:1,TEIF3:1,GIF4:1,TCIF4:1,HTIF4:1,TEIF4:1,GIF5:1,TCIF5:1,HTIF5:1,TEIF5:1,GIF6:1,TCIF6:1,HTIF6:1,TEIF6:1,GIF7:1,TCIF7:1,HTIF7:1,TEIF7:1;
    }BIT;
  }ISR;
  
  union
  {
    volatile U32 VALUE;
    struct
    {
      volatile U32 CGIF1:1,CTCIF1:1,CHTIF1:1,CTEIF1:1,CGIF2:1,CTCIF2:1,CHTIF2:1,CTEIF2:1,CGIF3:1,CTCIF3:1,CHTIF3:1,CTEIF3:1,CGIF4:1,CTCIF4:1,CHTIF4:1,CTEIF4:1,CGIF5:1,CTCIF5:1,CHTIF5:1,CTEIF5:1,CGIF6:1,CTCIF6:1,CHTIF6:1,CTEIF6:1,CGIF7:1,CTCIF7:1,CHTIF7:1,CTEIF7:1;
    }BIT;
  }IFCR;
  struct
  {
    union
    {
      volatile U32 VALUE;
      struct
      {
        volatile U32 EN:1,TCIE:1,HTIE:1,TEIE:1,DIR:1,CIRC:1,PINC:1,MINC:1,PSIZE:2,MSIZE:2,PL:1,MEM2MEM:1;
      }BIT;
    }CCR;
    
    union
    {
      U32 VALUE;
      U16 VALUE16;
      struct
      {
        U32 NDT:16;
      }BIT;
    }CNDTR;
    union
    {
      U32 VALUE;
      struct
      {
        U32 PA:32;
      }BIT;
    }CPAR;
    union
    {
      U32 VALUE;
      struct
      {
        U32 MA:32;
      }BIT;
    }CMAR;
    const U32 RESERVED1;
  }CH[7];
}DMAV1_BYTES;

#ifdef DMA1V1
#define DMA1 (*((DMAV1_BYTES*)DMA1_BASE))
#endif//DMA2V1

#ifdef DMA2V1
#define DMA2 (*((DMAV1_BYTES*)DMA2_BASE))
#endif//DMA2V1

extern void DMA_CHDIS(DMAV1_BYTES *DMA,U8 CHANNEL);
extern void DMA_CHEN(DMAV1_BYTES *DMA,U8 CHANNEL);
extern void DMA_CHINIT(DMAV1_BYTES *DMA,U32 CHENEL,U32 CONFIG,U32 NUMBER,U32 PADDR,U32 MADDR);

#endif//_DMAV2_H_